<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SPXVisuals</title>

<style>
/* ---------------- Base Styles ---------------- */
body {
font-family: system-ui, sans-serif;
background: #0f172a;
color: #e5e7eb;
margin: 0;
padding: 24px;
}

a { text-decoration: none; color: inherit; }

/* ---------------- Header ---------------- */
header {
position: sticky;
top: 0;
z-index: 100;
padding: 16px 24px;
display: flex;
flex-direction: column;
align-items: center;
gap: 10px;
background: linear-gradient(90deg, #3b82f6, #06b6d4, #3b82f6);
background-size: 200% 200%;
animation: gradientShift 6s ease infinite;
color: #ffffff;
}

h1 {
margin: 0;
font-size: 2rem;
display: flex;
align-items: center;
gap: 12px;
}

.title-link,.x-link { color:#fff; cursor:pointer; }
.title-link:hover,.x-link:hover { text-decoration: underline; }

.header-icons { font-size:1.5rem; }
.x-link { font-size:1.2rem; margin-top:-4px; }

/* ---------------- Controls ---------------- */
.controls {
display:flex;
flex-direction:column;
gap:10px;
width:100%;
max-width:420px;
align-items:center;
}

input[type="text"] {
padding:6px 12px;
border-radius:6px;
border:1px solid #475569;
background:#020617;
color:#e5e7eb;
width:100%;
max-width:360px;
text-align:center;
}

input::placeholder { color:#94a3b8; }

.filter-buttons {
display:flex;
gap:8px;
flex-wrap:wrap;
justify-content:center;
}

/* ---------------- Button Styles ---------------- */
button {
background:#020617;
--bg-color:#020617;
background:var(--bg-color);
color:#e5e7eb;
border:none;
border-radius:6px;
padding:6px 12px;
cursor:pointer;
transition:background .3s,color .3s;
}

button:hover { background:#1e293b; }

button.active {
background:#fff;
color:var(--bg-color);
}

#clearSearch {
background:#111827;
color:#e5e7eb;
display:none;
}

#clearSearch:hover { background:#1f2937; }

/* ---------------- Posts Layout ---------------- */
main {
column-count:2;
column-gap:32px;
margin-top:32px;
}

.post {
display:inline-block;
width:100%;
margin-bottom:40px;
break-inside:avoid;
transition:transform .35s ease,filter .35s ease;
}

.post:hover {
transform:scale(1.03);
filter:drop-shadow(0 14px 36px rgba(59,130,246,.4));
}

.post img {
width:100%;
border-radius:10px;
margin:16px 0;
cursor:zoom-in;
transition:transform .3s ease,box-shadow .3s ease;
}

.post img:hover {
transform:scale(1.02);
box-shadow:0 0 26px rgba(34,211,238,.45);
}

.hashtags { display:flex; flex-wrap:wrap; gap:6px; margin-bottom:6px; }

.hashtags a {
font-size:.85rem;
cursor:pointer;
color:#22d3ee;
animation:glowPulse 2.5s ease-in-out infinite alternate;
}

.post-date { font-size:.8rem; color:#94a3b8; margin-bottom:6px; }

.empty-state {
text-align:center;
font-size:1rem;
color:#94a3b8;
margin-top:48px;
}

.tweet-link-container { text-align:center; margin-bottom:8px; }

.tweet-link-container a {
display:inline-block;
background:linear-gradient(90deg,#3b82f6,#06b6d4,#3b82f6);
background-size:200% 200%;
padding:6px 10px;
border-radius:8px;
font-weight:bold;
color:#fff;
animation:gradientShift 3s ease infinite;
transition:transform .3s;
}

.tweet-link-container a:hover { transform:scale(1.08); }

.image-modal {
position:fixed;
inset:0;
background:rgba(0,0,0,.85);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
}

.image-modal img {
max-width:95%;
max-height:95%;
border-radius:12px;
cursor:zoom-out;
}

@keyframes glowPulse {
from{ text-shadow:0 0 6px #22d3ee; }
to{ text-shadow:0 0 14px #3b82f6; }
}

@keyframes gradientShift {
0%{background-position:0% 50%;}
50%{background-position:100% 50%;}
100%{background-position:0% 50%;}
}

footer {
text-align:center;
font-size:.8rem;
color:#94a3b8;
margin-top:48px;
}

@media (max-width:768px){
main{ column-count:1; }
}
</style>
</head>

<body>
<header>
<h1>
<span class="header-icons">üìä</span>
<a href="https://spxvisuals.github.io/" class="title-link" target="_blank">SPXVisuals</a>
<span class="header-icons">üìà</span>
</h1>

<a href="https://x.com/SPXVisuals" target="_blank" class="x-link">ùïè</a>

<div class="controls">
<input type="text" id="search" placeholder="Search by hashtag or MM/DD/YYYY" />
<div class="filter-buttons">
<button id="todayFilter" style="--bg-color:#3b82f6;">Today's Charts</button>
<button id="weekFilter" style="--bg-color:#06b6d4;">This Week</button>
<button id="monthFilter" style="--bg-color:#3b82f6;">This Month</button>
<button id="clearSearch">Clear Search</button>
</div>
</div>
</header>

<main id="posts"></main>
<footer>¬© 2026 SPXVisuals</footer>

<script>
const ITEMS_PER_LOAD = 20;
let allPosts = [];
let visiblePosts = [];
let renderIndex = 0;

async function loadPosts() {
const res = await fetch('output/metadata/all_posts.json');
const all = await res.json();

all.sort((a,b)=> new Date(b.date) - new Date(a.date));
return all;
}

function extractHashtags(text) {
return [...text.matchAll(/#[A-Za-z0-9_]+/g)].map(m=>m[0]);
}

function todayLocalISO() {
const d=new Date();
d.setHours(0,0,0,0);
return d.toISOString().slice(0,10);
}

function normalizeDateInput(input){
const m=input.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);
if(!m) return input;
return `${m[3]}-${m[1]}-${m[2]}`;
}

function renderMore() {
const container=document.getElementById('posts');
const slice=visiblePosts.slice(renderIndex,renderIndex+ITEMS_PER_LOAD);
renderIndex+=ITEMS_PER_LOAD;

slice.forEach(post=>{
const div=document.createElement('div');
div.className='post';
div.innerHTML=`
${post.url?`<div class="tweet-link-container"><a href="${post.url}" target="_blank">See Post On ùïè</a></div>`:''}
<div class="post-date">${post.date}</div>
<div class="hashtags">${extractHashtags(post.text).map(t=>`<a href="#">${t}</a>`).join('')}</div>
<div>${post.text}</div>
${post.images.map(i=>`<img src="${i}" loading="lazy">`).join('')}
`;
container.appendChild(div);
});
}

function applyFilters(){
let input=normalizeDateInput(document.getElementById('search').value.toLowerCase());
visiblePosts=allPosts.filter(p=>p.hashtags?.some(t=>t.toLowerCase().includes(input))||p.date.includes(input));
document.getElementById('posts').innerHTML='';
renderIndex=0;
renderMore();
}

window.addEventListener('scroll',()=>{
if(window.innerHeight+window.scrollY>=document.body.offsetHeight-300){
renderMore();
}
});

loadPosts().then(p=>{
allPosts=p;
visiblePosts=p;
renderMore();
});
</script>

<script>
document.addEventListener('click', e => {
if (e.target.tagName === 'IMG' && e.target.closest('.post')) {
const modal = document.createElement('div');
modal.className = 'image-modal';
modal.innerHTML = `<img src="${e.target.src}">`;
modal.onclick = () => modal.remove();
document.body.appendChild(modal);
}
});
</script>

</body>
</html>
